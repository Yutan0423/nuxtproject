(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{260:function(t,e,n){var content=n(406);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(42).default)("3dc2fd99",content,!0,{sourceMap:!1})},405:function(t,e,n){"use strict";var o=n(260);n.n(o).a},406:function(t,e,n){(e=n(41)(!1)).push([t.i,'*[data-v-34812f5a]{margin:0;box-sizing:border-box}.header[data-v-34812f5a]{background-color:#1da1f2;margin-bottom:1em;padding:.4em .8em;color:#fff}.content[data-v-34812f5a]{margin:0 auto;padding:0 10px;max-width:600px}.form[data-v-34812f5a]{display:flex;justify-content:center;align-items:center;height:80px;width:100%;background:#f5f5f5}.form textarea[data-v-34812f5a]{border:1px solid #ccc;border-radius:2px;height:4em;width:calc(100% - 6em);resize:none}.list[data-v-34812f5a]{margin-bottom:100px}.item[data-v-34812f5a]{position:relative;display:flex;align-items:flex-end;margin-bottom:.8em}.item-image img[data-v-34812f5a]{border-radius:20px;vertical-align:top}.item-detail[data-v-34812f5a]{margin:0 0 0 1.4em}.item-name[data-v-34812f5a]{font-size:75%}.item-message[data-v-34812f5a]{position:relative;display:inline-block;padding:.8em;background:#deefe8;border-radius:4px;line-height:1.2em}.item-message[data-v-34812f5a]:before{position:absolute;content:" ";display:block;left:-16px;bottom:12px;border:4px solid transparent;border-right:12px solid #deefe8}.send-button[data-v-34812f5a]{height:4em}.chat-enter-active[data-v-34812f5a]{transition:all 1s}.chat-enter[data-v-34812f5a]{opacity:0;transform:translateX(-1em)}',""]),t.exports=e},423:function(t,e,n){"use strict";n.r(e);n(34);var o=n(95),d=n.n(o),r=n(169),l={components:{Nl2br:n.n(r).a},data:function(){return{user:{},chat:[],input:""}},created:function(){var t=this;d.a.auth().onAuthStateChanged((function(e){t.user=e||{};var n=d.a.database().ref("message");e?(t.chat=[],n.limitToLast(10).on("child_added",t.childAdded)):n.limitToLast(10).off("child_added",t.childAdded)}))},methods:{doLogin:function(){var t=new d.a.auth.GoogleAuthProvider;d.a.auth().signInWithPopup(t)},doLogout:function(){d.a.auth().signOut()},scrollBottom:function(){this.$nextTick((function(){window.scrollTo(0,document.body.clientHeight)}))},childAdded:function(t){var e=t.val();this.chat.push({key:t.key,name:e.name,image:e.image,message:e.message}),this.scrollBottom()},doSend:function(){var t=this;this.user.uid&&this.input.length&&d.a.database().ref("message").push({message:this.input,name:this.user.displayName,image:this.user.photoURL},(function(){t.input=""}))}}},c=(n(405),n(16)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",{staticClass:"header"},[n("h2",[t._v("Chatアプリ")]),t._v(" "),t.user.uid?n("div",{key:"login"},[t._v("\n        ["+t._s(t.user.displayName)+"]\n        "),n("button",{attrs:{type:"button"},on:{click:t.doLogout}},[t._v("ログアウト")])]):n("div",{key:"logout"},[n("button",{attrs:{type:"button"},on:{click:t.doLogin}},[t._v("ログイン")])])]),t._v(" "),n("transition-group",{staticClass:"list content",attrs:{name:"chat",tag:"div"}},t._l(t.chat,(function(e){var o=e.key,d=e.name,image=e.image,r=e.message;return n("section",{key:o,staticClass:"item"},[n("div",{staticClass:"item-image"},[n("img",{attrs:{src:image,width:"40",height:"40"}})]),t._v(" "),n("div",{staticClass:"item-detail"},[n("div",{staticClass:"item-name"},[t._v(t._s(d))]),t._v(" "),n("div",{staticClass:"item-message"},[n("nl2br",{attrs:{tag:"div",text:r}})],1)])])})),0),t._v(" "),n("form",{staticClass:"form",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.doSend(e)}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{disabled:!t.user.uid},domProps:{value:t.input},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.doSend(e))},input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),n("button",{staticClass:"send-button",attrs:{type:"submit",disabled:!t.user.uid}},[t._v("Send")])])],1)}),[],!1,null,"34812f5a",null);e.default=component.exports;installComponents(component,{Header:n(87).default})}}]);